<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>043 Members Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #card-container {
      position: relative;
      height: 400px;
      width: 320px;
      overflow: visible;
    }
    .card {
      position: absolute;
      left: 0;
      transition: all 0.4s ease;
      z-index: 1;
      width: 300px;
      border-radius: 0.25rem;
      background-color: #4b5563;
      opacity: 0.3;
      transform: scaleY(0.25);
      height: 30px;
    }
    .card.active {
      height: 180px;
      opacity: 1;
      z-index: 10;
      transform: scale(1);
      background-color: #1f2937;
    }
    .card .card-content {
      display: none;
    }
    .card.active .card-content {
      display: block;
    }
    .card.active .card-content img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0.25rem;
    }
  </style>
</head>
<body class="bg-black text-white font-sans min-h-screen flex flex-col items-center justify-center p-8">
  <h1 class="text-3xl font-bold mb-8">Участники 043</h1>
  <div class="flex flex-row gap-12 items-start">
    <div id="card-container" class="relative">
      <!-- Cards will be injected here -->
    </div>
    <div id="member-description" class="max-w-md text-gray-300 text-base leading-relaxed self-start mt-[120px]">
      <!-- Text will be injected here -->
    </div>
  </div>
  <div class="mt-6 flex gap-4">
    <button onclick="prevCard()" class="px-4 py-2 bg-white text-black rounded hover:bg-gray-300">↑</button>
    <button onclick="nextCard()" class="px-4 py-2 bg-white text-black rounded hover:bg-gray-300">↓</button>
  </div>

  <script>
    let members = [];

    fetch('members.json')
      .then(res => res.json())
      .then(data => {
        members = data;
        initCards();
      });

    let currentIndex = 0;
    const container = document.getElementById('card-container');
    const description = document.getElementById('member-description');
    let cardElements = [];

    function initCards() {
      container.innerHTML = '';
      cardElements = [];
      members.forEach((member, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-content">
            <img src="${member.img}" alt="${member.name}">
          </div>
        `;
        container.appendChild(card);
        cardElements.push(card);
      });
      updateActiveCard(true);
    }

    function updateActiveCard(initial = false) {
      cardElements.forEach((card, index) => {
        card.classList.remove('active');
        const position = (index - currentIndex) * 60 + 120;
        card.style.display = 'block';
        card.style.top = `${position}px`;
      });
      cardElements[currentIndex].classList.add('active');

      const member = members[currentIndex];
      description.innerHTML = `
        <div>
          <h2 class="text-2xl font-bold mb-2">${member.name}</h2>
          <p class="text-sm text-gray-400 mb-1">${member.area}</p>
          <p class="text-sm text-gray-500 italic mb-2">Уровень ${member.level}</p>
          <p>${member.text}</p>
        </div>
      `;
    }

    function nextCard() {
      currentIndex = (currentIndex + 1) % members.length;
      updateActiveCard();
    }

    function prevCard() {
      currentIndex = (currentIndex - 1 + members.length) % members.length;
      updateActiveCard();
    }
  </script>
</body>
</html>
